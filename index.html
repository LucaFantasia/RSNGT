<!DOCTYPE html>
    <html>
        <head>
            <title>RSNGT</title>
            <style>
                .background{
                    background-color:rgb(185, 185, 185);
                }
                .question{
                    width:68px
                }
                .border{
                    padding: 10px;
                    border: 1px solid black;
                    border-collapse: collapse
                }
                .color1{
                    color: rgb(0, 96, 152)
                }
                .color2{
                    color: rgb(246, 191, 53)
                }
                .color3{
                    color: rgb(96, 189, 172)
                }
                .button{
                    height:45px;
                    width:150px;
                }
                .image{
                    width:31.8px;
                    height:31.8px;
                }
                .button1{
                    width:68px;
                    height:15px;
                    font-size:10px;
                    font-family:monospace;
                    color: rgb(0, 96, 152);
                }
            
            </style>
        </head>
        <body id="body" class="background">
            <table>
                <td>
                    <table>
                        <td>
                            <tr>
                                <td>
                                    <select style="background-color: rgb(96, 189, 172);" class="question" style="height:23px" id = "myList">
                                        <option value = "10"selected>10</option>
                                        <option value = "9">9</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="radio" id="radio"><b style="color: rgb(0, 96, 152); font-family:monospace,bold">Absent</b>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input id="correct" type="image" class="image" src="https://raw.githubusercontent.com/LucaFantasia/RSNGT/master/images/tick.jpg">
                                    <input  id="wrong" type="image" class="image" src="https://raw.githubusercontent.com/LucaFantasia/RSNGT/master/images/x.png">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="button" class="button1" id="button1" value="report" onclick = "report()">
                                </td>
                            </tr>
                        </td>
                    </table>
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <table>
                        <tr>
                            <h1 style="font-family:monospace" id="test">Ready Playerone</h1>
                        </tr>
                        <tr>
                            <input style="background-color:rgb(246, 191, 53)" class="button" type="button" name="button1" class="search" id="button" onclick="setNames()">
                        </tr>
                    </table>
                </td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>                 
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <table>
                        <tr>
                            <div style="font-family:monospace" class="color1">Random</div>
                        </tr>
                        <tr>
                            <div style="font-family:monospace" class="color2">Student</div>
                        </tr>
                        <tr>
                            <div style="font-family:monospace" class="color3">Name</div>
                        </tr>
                        <tr>
                            <div style="font-family:monospace" class="color1">Generator</div>
                        </tr>
                    </table>
                </td>
            </table>
            <script type="text/javascript">
                var studentNames = [];
                var studentDisplayed = [];
                var randomNumber;
                var x;
                var menu = document.getElementById("myList");
                menu.addEventListener("change", generateData);
                function generateData(event) {
                    if (menu.value == '10') {
                        setArrays10();
                        
                    } else if (menu.value == '9') {
                        setArrays9();
                    }
                }
                var absentAll = [];
                var skip = false;
                var absentCount = 0;
                document.getElementById("radio").addEventListener("click", absent) 
                function absent(event) {
                        var red_colour = "#ff0000";
                        var readyPlayerOne = document.getElementById("test");
                        readyPlayerOne.style.color = red_colour;
                        setTimeout(back, 100);
                        function back() {
                            readyPlayerOne.style.color = "#000000";
                        }
                    if(menu.value == '10') {
                        absentAll = [false,false,false,false,false,false,false,false,false,false,
                    false,false,false,false,false,false,false,false,false,false,false];
                        absentAll[randomNumber] = true;
                        console.log(studentNames[randomNumber] + " is absent");
                        document.getElementById("radio").checked = false;
                        skip = true;
                        absentCount++;
                    } if(menu.value == '9') {
                        absentAll = [false,false,false,false,false,false,false,false,
                 false,false,false,false,false,
                 false,false,false,false,false,false,false,false,false,false,false];
                        absentAll[randomNumber] = true;
                        console.log(studentNames[randomNumber] + " is absent");
                        document.getElementById("radio").checked = false;
                        skip = true;
                        absentCount++;
                    }
                }
                var reportCorrect = [];
                var reportWrong = [];
                if(menu.value == '10') {
                    reportCorrect = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                    reportWrong = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                } if(menu.value == '9') {
                    reportCorrect = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                    reportWrong = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                }
                menu.addEventListener("change", ticks);
                function ticks(event) {
                    if(menu.value == '10') {
                        reportCorrect = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                        reportWrong = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                    } if(menu.value == '9') {
                        reportCorrect = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                        reportWrong = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
                    }
                }
                document.getElementById("correct").addEventListener("click", correct);
                function correct(event) {
                    var  green = "#00ff00";
                    document.body.style.backgroundColor = green;
                    setTimeout(right, 100);
                    function right() {
                        document.body.style.backgroundColor = "rgb(185, 185, 185)";
                    }
                    document.getElementById("correct").checked = false;
                    reportCorrect[randomNumber]++;
                }
                document.getElementById("wrong").addEventListener("click", wrong);
                function wrong(event) {
                    var red = "#ff0000";
                    document.body.style.backgroundColor = red;
                    setTimeout(incorrect, 100);
                    function incorrect() {
                        document.body.style.backgroundColor = "rgb(185, 185, 185)";
                    }
                    document.getElementById("wrong").checked = false;
                    reportWrong[randomNumber]++;
                }
                function report() {
                    for(i = 0; i < studentNames.length; i++) {
                        console.log(studentNames[i] + " got " + reportCorrect[i] + " correct and " + reportWrong[i] + " wrong")
                    } 
                }
                var count = 0 ;
                document.getElementById("button").value = count;
                generateData(event);
                function setArrays10() {
                    studentNames = ["Adriana","Allan","Luca","Myro","JJ","JM","Dinis",
                    "Tilly","Laura","Carolina","Luna","Afonso","Cecilia",
                    "Sofia F","Sofia G","Sebastian","Holly","Sandro","Tian","Miguel","Maria"];
                 studentDisplayed = [false,false,false,false,false,false,false,false,false,false,
                    false,false,false,false,false,false,false,false,false,false,false];
                 count = studentNames.length;
                 document.getElementById("button").value = count;
                }
                function setArrays9() {
                    studentNames = ["Luca","Elliot","Adam","Sam","Pedro","Guilherme","Bernado","Sarah",
                    "Mariana","Daniela","Anais","Beatriz","Emily","Tarushi","Lauren",
                    "Sofia C","Luisa","Kiana","Lena","Sofia M","Amelia","Sofia A","Catarina","Maria"];
                 studentDisplayed = [false,false,false,false,false,false,false,false,
                 false,false,false,false,false,
                 false,false,false,false,false,false,false,false,false,false,false];
                 count = studentNames.length;
                 document.getElementById("button").value = count;
                }
                var body = document.querySelector("body");
                body.addEventListener("keydown",function(e){
                    var isInput = ~["TEXTAREA", "INPUT"].indexOf(e.target.tagName);
                    if(e.key === " " && !isInput){
                    setNames();
                }
                });
                function setNames() {
                    do {
                         randomNumber = Math.floor(Math.random() * studentNames.length);
                    } while (studentDisplayed[randomNumber] == true || absentAll[randomNumber] == true);
                        studentDisplayed[randomNumber] = true;
                        document.getElementById("test").innerHTML = studentNames[randomNumber];
                        count--;
                        document.getElementById("button").value = count;
                        if (count == 0) {
                            generateData(event);
                            if(skip == true) {
                                for(a = 0; a < absentCount; a++) {
                                    count--;
                                }
                            }
                            return;
                        }
                }     
            </script>
        </body>
    </html>
